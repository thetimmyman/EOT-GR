# EOT Guild Raid Dashboard - Project Knowledge Base

## Project Overview
Next.js 14 dashboard application for analyzing guild raid performance data from the mobile game "Eternal Odyssey Tale" (EOT). The application displays player statistics, boss performance metrics, and raid analytics.

## Tech Stack
- **Framework**: Next.js 14 (App Router)
- **Language**: TypeScript
- **Database**: Supabase (PostgreSQL)
- **Charts**: Recharts v3.1.0
- **Styling**: Tailwind CSS
- **Hosting**: GitHub Codespaces

## Database Schema
**Main Table**: `EOT_GR_data`

Key fields:
- `Guild`: Guild identifier (e.g., 'IW')
- `Season`: Season number (string)
- `displayName`: Player display name
- `Name`: Enemy/boss name
- `damageDealt`: Damage dealt by player
- `damageType`: Type of damage (e.g., 'attack', 'bomb')
- `loopIndex`: Raid loop/lap number
- `tier`: Boss tier level (1-5)
- `enemyHp`: Total enemy HP
- `enemyHpLeft`: Remaining enemy HP
- `encounterId`: Unique encounter identifier
- `timestamp`: Action timestamp
- `startedOn`: Encounter start time
- `completedOn`: Encounter completion time

## Architecture

### Pages/Components
- `page.tsx`: Main dashboard with navigation
- `SummaryPage.tsx`: Overview statistics and charts
- `PlayerPerformancePage.tsx`: Individual player analytics
- `BossPerformancePage.tsx`: Boss-specific performance metrics
- `L1BossPage.tsx` to `L5BossPage.tsx`: Tier-specific boss pages
- `TokenUsagePage.tsx`: Token usage analytics
- `VOTLWPage.tsx`: Veteran of the Long War awards page
- `DebugPage.tsx`: Database connection testing

### Key Components
- `Navigation.tsx`: Main navigation bar
- `RechartsWrapper.tsx`: Type-safe wrapper for recharts components

## Known Issues & Solutions

### TypeScript/Recharts Compatibility
**Issue**: Recharts v3.1.0 bundles React 19 types, conflicting with project's React 18 types
**Solution**: 
- Use `RechartsWrapper.tsx` for type-safe imports
- Added package.json overrides to force React 18 types
- Updated tsconfig.json with path mappings

### Common Build Commands
```bash
npm run dev          # Development server
npm run build        # Production build
npm run lint         # ESLint check
npm run typecheck    # TypeScript check (if available)
```

### Database Connection
- Uses Supabase client with anon key
- Connection test on app startup
- Automatically detects available seasons (70-80 range)

## Data Analysis Patterns

### Player Performance Metrics
- Average damage per encounter
- Total damage dealt
- Token efficiency
- Biggest single hit
- Hit count and accuracy

### Boss Performance Tracking
- Damage distribution across tiers
- Loop/lap progression
- Token usage per boss
- Time-based performance trends

### Guild Analytics
- Season-over-season comparisons
- Player rankings
- Resource utilization
- Victory rates

## Common Queries
- Season data: Filter by `Season` field
- Guild data: Filter by `Guild` field
- Player stats: Group by `displayName`
- Boss encounters: Filter by `Name` and `tier`
- Token usage: Count records per player per loop

## Development Notes
- All components use 'use client' directive
- Supabase queries should handle null/undefined values
- Chart components need proper TypeScript typing
- Loading states important for UX

## Troubleshooting
- If charts don't render: Check RechartsWrapper imports
- If build fails: Run `npm run build` to see TypeScript errors
- If database connection fails: Check Supabase client configuration
- If port forwarding issues: Ensure dev server is running on correct port

---
*Last updated: Auto-generated by Claude Code*

## Environment Configuration

### Required Environment Variables

Create a `.env.local` file with the following variables:

```bash
# Supabase Configuration
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
```

### External API Integration

The application can be extended to integrate with external APIs for data synchronization. Refer to your game's API documentation for specific endpoints and authentication requirements.
